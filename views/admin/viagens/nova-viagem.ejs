<div class="col-12 d-flex justify-content-center espaco-card-edit">
  <div class="card p-3 shadow-sm mt-2" style="width: 100%; max-width: 600px; background-color: #ffffff;">
    <form id="formNovaViagem" action="/admin/viagens/add-nova-viagem" method="POST" class="container mt-4" novalidate>
      <h2 class="mb-4 titulo">Cadastrar Viagem</h2>

      <input type="hidden" name="solicitacaoID" value="<%= solicitacaoID %>">
      <input type="hidden" name="redirectTo" value="<%= redirectTo %>">

      <div class="mb-3">
        <label for="cidadeconsulID" class="form-label">Cidade</label>
        <select 
          id="cidadeconsulID" 
          name="cidadeconsulID" 
          class="form-control <%= !preenchido?.cidadeconsulID && erros?.campos ? 'is-invalid' : '' %>">
          <option value="" disabled <%= !preenchido?.cidadeconsulID ? 'selected' : '' %>>Selecione uma cidade</option>
          <% cidadeconsul.forEach(cidade => { %>
            <option value="<%= cidade.cod %>" <%= preenchido?.cidadeconsulID == cidade.cod ? 'selected' : '' %>>
              <%= cidade.descricao %>
            </option>
          <% }) %>
        </select>
      </div>

      <div class="mb-3">
        <label for="data_viagem" class="form-label">Data da Viagem</label>
        <input 
          type="date" 
          id="data_viagem" 
          name="data_viagem" 
          class="form-control <%= (!preenchido?.data_viagem && erros?.campos) || erros?.data ? 'is-invalid' : '' %>" 
          value="<%= preenchido?.data_viagem || '' %>">

        <% if (erros?.data) { %>
          <div class="invalid-feedback d-block">
            <%= erros.data %>
          </div>
        <% } %>
      </div>

      <div class="mb-3">
        <label for="horario_saida" class="form-label">Horário de Saída</label>
        <input 
          type="time" 
          id="horario_saida" 
          name="horario_saida" 
          class="form-control <%= !preenchido?.horario_saida && erros?.campos ? 'is-invalid' : '' %>" 
          value="<%= preenchido?.horario_saida || '' %>">
      </div>

      <div class="mb-3">
        <label for="veiculoID" class="form-label">Veículo</label>
        <select 
          id="veiculoID" 
          name="veiculoID" 
          class="form-control <%= !preenchido?.veiculoID && erros?.campos ? 'is-invalid' : '' %>">
          <option value="" disabled <%= !preenchido?.veiculoID ? 'selected' : '' %>>Selecione um Veículo</option>
          <% veiculos.forEach(veiculo => { %>
            <option value="<%= veiculo.cod %>" <%= preenchido?.veiculoID == veiculo.cod ? 'selected' : '' %>>
              <%= veiculo.modelo_veiculo %>
            </option>
          <% }) %>
        </select>
      </div>

      <div class="mb-3">
        <label for="motoristaID" class="form-label">Motorista</label>
        <select 
          id="motoristaID" 
          name="motoristaID" 
          class="form-control <%= !preenchido?.motoristaID && erros?.campos ? 'is-invalid' : '' %>">
          <option value="" disabled <%= !preenchido?.motoristaID ? 'selected' : '' %>>Selecione um Motorista</option>
          <% motoristas.forEach(motorista => { %>
            <option value="<%= motorista.cod %>" <%= preenchido?.motoristaID == motorista.cod ? 'selected' : '' %>>
              <%= motorista.nome %>
            </option>
          <% }) %>
        </select>
      </div>

      <div class="d-flex justify-content-between mt-4">
        <button type="button" class="botao" onclick="history.back()">Cancelar</button>
        <button type="submit" class="botao">Cadastrar</button>
      </div>
    </form>
  </div>
</div>
