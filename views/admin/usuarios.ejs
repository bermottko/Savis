<div class="container mt-4">
  <div class="row justify-content-center">
    <% posts.forEach(function(post) { %>
      <div class="col-12 d-flex justify-content-center mb-3">
  <div class="card p-3 shadow-sm" style="width: 100%; max-width: 720px; background-color: #d1e3fd;">
    <div class="d-flex flex-row align-items-center">
      <img 
        src="<%= post.img ? '/uploads/' + post.img : '/assets/default-profile.jpg' %>" 
        alt="Foto de perfil" 
        class="me-3 border shadow-sm" 
        style="width: 60px; height: 60px; object-fit: cover; border-radius: 10px;">
      <div class="flex-grow-1">
        <h5 class="mb-0" style="font-size: 16px;"><%= post.nome %></h5>
      </div>
      <button class="botao ver-mais-btn" data-cod="<%= post.cod %>">Ver mais</button>
    </div>

    <!-- Ver Mais -->
    <div class="detalhes" style="overflow: hidden;">
      <p><strong>Data de Nascimento:</strong> <%= post.data_nasc %></p>
      <p><strong>Email:</strong> <%= post.email %></p>
      <p><strong>Telefone:</strong> <%= post.fone %></p>
      <p><strong>Endere√ßo:</strong>
        <%= post.endereco?.rua || '' %>, 
        <%= post.endereco?.numero || '' %> - 
        <%= post.endereco?.bairro || '' %> - 
        <%= post.endereco?.cidade || '' %>
        (<%=post.endereco?.UF || '' %>) 
        CEP: <%= post.endereco?.CEP || '' %>
      </p>
      <p><strong>SUS:</strong> <%= post.SUS %></p>
    </div>
  </div>
</div>
<% }) %>
  </div>
</div>

<script>
  document.querySelectorAll('.ver-mais-btn').forEach(btn => {
    btn.addEventListener('click', function () {
      const card = this.closest('.card');
      const detalhes = card.querySelector('.detalhes');
      const estaExpandido = detalhes.classList.contains('expandido');

      if (estaExpandido) {
        detalhes.style.height = '0px';
        detalhes.style.marginTop = '0';
        detalhes.classList.remove('expandido');
        this.textContent = 'Ver mais';
      } else {
        detalhes.style.height = detalhes.scrollHeight + 'px';
        detalhes.style.marginTop = '16px';
        detalhes.classList.add('expandido');
        this.textContent = 'Ver menos';
      }
    });
  });
</script>


