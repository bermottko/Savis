<div class="container d-flex justify-content-center align-items-center mt-5">
  <div class="card p-4 shadow-sm card-viagem" style="max-width: 800px; width: 100%;">

    <!-- Cabeçalho -->
    <div class="d-flex flex-row align-items-center mb-3">
      <img 
        src="<%= motorista.img ? '/uploads/' + motorista.img : '/assets/pessoa.png' %>" 
        alt="Foto de perfil" 
        class="foto-perfil me-3"
        style="width: 80px; height: 80px; object-fit: cover; border-radius: 12px;">
      <h3 class="nome-perfil mb-0"><%= motorista.nome %></h3>
    </div>

    <!-- DADOS DO MOTORISTA -->
    <div class="dados-motorista" style="display: block;">
      <p><strong>Data de Nascimento: </strong><%= motorista.data_nasc.split('-').reverse().join('/') %></p>
      <hr>
      <p><strong>CPF: </strong><span class="cpf-perfil"><%= motorista.CPF.replace(/^(\d{3})(\d{3})(\d{3})(\d{2})$/, "$1.$2.$3-$4") %></span></p>
      <hr>
      <p><strong>Gênero: </strong><%= motorista.genero.descricao %></p>
      <hr>
      <p><strong>Email: </strong><%= motorista.email %></p>
      <hr>
      <p><strong>Telefone: </strong><%= motorista.fone.replace(/^(\d{2})(\d{5})(\d{4})$/, "($1) $2-$3") %></p>
      <hr>
      <p><strong>Endereço: </strong>
        <%= motorista.endereco?.rua || '' %>, 
        <%= motorista.endereco?.numero || '' %> - 
        <%= motorista.endereco?.bairro || '' %> - 
        <%= motorista.endereco?.cidade || '' %> 
        (<%= motorista.endereco?.UF || '' %>) 
        CEP: <%= motorista.endereco?.CEP ? motorista.endereco.CEP.replace(/^(\d{5})(\d{3})$/, "$1-$2") : '' %>
      </p>
      <hr>
    </div>

    <!-- DOCUMENTOS DO MOTORISTA -->
    <div class="detalhes-docs" style="display: none; margin-top: 10px;">
      <% const documentos = [
        { campo: 'carteira_trab', label: 'Carteira de Trabalho' },
        { campo: 'cursos', label: 'Cursos' },
        { campo: 'habilitacao', label: 'Habilitação' },
        { campo: 'comprov_resid', label: 'Comprovante de Residência' },
        { campo: 'comprov_escola', label: 'Comprovante Escolar' },
        { campo: 'titulo_eleitor', label: 'Título de Eleitor' },
        { campo: 'ant_crim', label: 'Antecedentes Criminais' },
        { campo: 'exame_tox', label: 'Exame Toxicológico' },
      ]; %>

      <div class="row row-cols-1 row-cols-md-2 g-2 mb-3">
        <% documentos.forEach(doc => { %>
          <div class="col">
            <div class="d-flex justify-content-between align-items-center border px-3 py-2 bg-white">
              <span style="font-size: 14px;"><%= doc.label %>:</span>
              <% if (motorista.documento?.[doc.campo]) { %>
                <a href="/uploads/<%= motorista.documento[doc.campo] %>" target="_blank" class="botao-visualizar bg-visualizar-docs">Visualizar</a>
              <% } else { %>
                <span class="text-muted" style="font-size: 13px;">Não enviado</span>
              <% } %>
            </div>
          </div>
        <% }); %>
      </div>
    </div>

    <!-- BOTÃO PARA ALTERNAR -->
    <div class="d-flex justify-content-end gap-3 mt-2">
      <a class="botao-visualizar" style="cursor: pointer">Documentos</a>
    </div>

  </div>
</div>
<div class="text-center mt-4">
  <a href="/motorista/sair" class="sair">Sair</a>
</div>

<script>
  document.querySelectorAll(".botao-visualizar").forEach(botao => {
    botao.addEventListener("click", function() {
      const card = this.closest(".card");
      const dados = card.querySelector(".dados-motorista");
      const docs = card.querySelector(".detalhes-docs");

      if (dados.style.display === "block") {
        // Mostrar documentos
        dados.style.display = "none";
        docs.style.display = "block";
        this.textContent = "Dados do Usuário";
      } else {
        // Mostrar dados do motorista
        dados.style.display = "block";
        docs.style.display = "none";
        this.textContent = "Documentos";
      }
    });
  });
</script>